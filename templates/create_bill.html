{% extends 'base.html' %}
{% load static %}

{% block title %} Create Bill {% endblock %}

{% block css %}
.danger{
	color:#ff715b;
}
.col-form-label, .form-control{
	font-size:.75rem;
}
.custom_pr_btn{
	font-size:.75rem;
	width:67px;
}

.custom_dropbox{
	background-color: transparent;
		width: 100%;
		font-size: 80%;
		text-align: center;
		/*text-transform: uppercase;*/
		
		padding: 1rem 2rem;
		border: 0;
}

label.file {
		position: relative;
		display: block;
		width: 100%;
		font-size: 80%;
		text-align: center;
		text-transform: uppercase;
		border: 2px dashed #ccc;
		margin: 3rem 0;
		padding: 3rem;
}

label.file:hover {
		background-color: rgba(255, 255, 255, 0.3);
}

label.file:active,
label.file.focus {
		border-color: #09f;
}

.custom_inp_file{
	position: absolute;
		left: 0;
		top: 0;
		width: 100%;
		height: 100%;
		opacity: 0;
		outline: 0;
		border: 1px solid red;
}
.sml {
		display: inline-block;
		color: #eee;
		background-color: rgba(0, 200, 0, 0.67);
		border-radius: 1rem;
		font-size: smaller;
		margin: .2rem 0 0 0;
		padding: 0.3rem 1rem;
}
.form-control{
	padding: 0.26rem 0.25rem;
}
{% endblock %}

{% block link %}
<!-- Plugins css -->
<link href="{% static 'libs/dropzone/min/dropzone.min.css" rel="stylesheet' %}" type="text/css" />
{% endblock %}

{% block page_content %}
<div class="page-content">
	<!-- start page title -->
	<div class="row">
		<div class="col-12">
			<div class="page-title-box d-flex align-items-center justify-content-between">
				<h4 class="page-title mb-0 font-size-18">Enter Billing Details</h4>
			
			</div>
		</div>
	</div>
	<!-- end page title -->

	{% for message in messages  %}            
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            <strong>Message : </strong> {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
        </div>
      {% endfor %}  

	<div class="row">
		<div class="col-lg-12">
			
			<form action="" method="post" enctype="multipart/form-data">
			{% csrf_token %} 
				{{form.activity_id}}
				{{form.added_by_id}}
				<div style="margin-bottom:5px;" class="card">
					<div class="card-body">
						
						<div class="form-group row">
							<label class="col-md-12 col-form-label" style="font-weight:100">Ticket: <span style="font-weight:500">{{activity_data.ticket}}</span>, DA: <span style="font-weight:500">{{activity_data.da}}</span>, EWO: <span style="font-weight:500">{{activity_data.ewo}}</span>, Job Assigned Date: <span style="font-weight:500">{{activity_data.rec_date|date:"m/d/Y"}}</span>, Client Provided ECD: <span style="font-weight:500">{{activity_data.ecd|date:"m/d/Y"}}</span>, Market: <span style="font-weight:500">{% if activity_data.market == 1 %}AL {% elif activity_data.market == 2 %}LA{% elif activity_data.market == 3 %}FL{% elif activity_data.market == 4 %}MS{% endif %}</span>, SOW: <span style="font-weight:500">{% for activities in activity_data.activity.all %}
								{{activities}},
								{% endfor %}</span></label>
						</div>
						<div class="form-group row">
							<label class="col-md-2 col-form-label">Job Status</label>
							<div class="col-md-2">
								{{form.job_status}}
							</div>
							<label class="col-md-2 col-form-label">Move to Drafting Week</label>
							<div class="col-md-2">
								{{form.drafting_week}}
							</div>
							<label class="col-md-2 col-form-label">Bucket</label>
							<div class="col-md-2">
								{{form.bucket}}
							</div>
						</div>
						<div class="form-group row">
							<label class="col-md-2 col-form-label">Assigned Fielder</label>
							<div class="col-md-2">
								{{form.fielder_name}}
							</div>
							<label class="col-md-2 col-form-label">Fielder ECD</label>
							<div class="col-md-2">
								{{form.fielder_ecd}}
							</div>
							<label class="col-md-2 col-form-label">Fielding Submission Date</label>
							<div class="col-md-2">
								{{form.fielder_sub_date}}
							</div>
						</div>
						<div class="form-group row">
							<label class="col-md-2 col-form-label">Design Submission Date</label>
							<div class="col-md-2">
								{{form.design_sub_date}}
							</div>
							<label class="col-md-2 col-form-label">Fielding Correction Submission Date</label>
							<div class="col-md-2">
								{{form.field_correct_sub_date}}
							</div>
							<label class="col-md-2 col-form-label">Design Correction Submission Date</label>
							<div class="col-md-2">
								{{form.design_correct_sub_date}}
							</div>
						</div>
						<div class="form-group row">
							<label class="col-md-2 col-form-label">Approved Footages From Client</label>
							<div class="col-md-2">
								{{form.app_footage}}
							</div>
							<label class="col-md-2 col-form-label">Invoicing Status Fielding</label>
							<div class="col-md-2">
								{{form.invoicing_status_field}}
							</div>
							<label class="col-md-2 col-form-label">Invoicing Status Design</label>
							<div class="col-md-2">
								{{form.invoicing_status_design}}
							</div>
						</div>
						<div class="form-group row">
							<label class="col-md-2 col-form-label">Invoicing Remarks</label>
							<div class="col-md-2">
								{{form.invoicing_remark}}
							</div>
							
						</div>
						<div class="form-group row mt-4">
							<button class="col-md-12 btn btn-primary">Submit</button>
						</div>
						
					</div>
				</div>
			</form>
	</div>
	<!-- end row -->
</div>
<!-- End Page-content -->
{% endblock %}

{% block script %}

<script src="{% static 'libs/bootstrap-datepicker/js/bootstrap-datepicker.min.js' %}"></script>

<!-- Plugins js -->
<script src="{% static 'libs/dropzone/min/dropzone.min.js' %}"></script>

<script>
	$('.custom_datepicker').datepicker({
		format: 'mm-dd-yyyy'
	})
	$(function() {
	
	  // This code will attach `fileselect` event to all file inputs on the page
	  $(document).on('change', ':file', function() {
		var input = $(this),
			numFiles = input.get(0).files ? input.get(0).files.length : 1,
			label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
		input.trigger('fileselect', [numFiles, label]);
	  });
	
	  
	  $(document).ready( function() {
	//below code executes on file input change and append name in text control
		  $(':file').on('fileselect', function(event, numFiles, label) {
	
			  var input = $(this).parents('.input-group').find(':text'),
				  log = numFiles > 1 ? numFiles + ' files selected' : label;
	
			  if( input.length ) {
				  input.val(log);
			  } else {
				  if( log ) alert(log);
			  }
	
		  });
	  });
	  
	});
	
		
	</script>
{% endblock %}